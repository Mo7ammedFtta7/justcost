<div class="main-title main-title2">
    <small><a href="#">{{'Home' | translate }}</a> <i class="fas fa-chevron-right"></i> <a
            href="#">{{'Categories' | translate }} </a> <i class="fas fa-chevron-right"></i> {{category}}</small>
</div><!-- End Title -->

<div class="catogery">
    <div class="row">
        <div class="col-xl-3 col-sm-12">
            <div class="custom text-center">{{'Custom Search' | translate }}</div>
            <div class="panel" style="padding-bottom: 130px;">
                <input type="search" ngModel #searcF (keyup)="onKey(searcF.value)" class="form-control search2" placeholder="{{'Search Title/Keyword' | translate }}">
                <!-- <i class="fas fa-search search-icon2"></i> -->
                <form action="" #filterForm="ngForm" (ngSubmit)="filter(filterForm)">
                    <div class="brand" *ngIf="Brands?.length >0">
                        <h6>brand</h6>
                        <ul class="list-unstyled check-ul">
                            <li *ngFor="let Brand of Brands">
                                <input type="checkbox" class="box" name="name{{Brand.id}}" id="brand{{Brand.id}}">
                                <label for="brand{{Brand.id}}">{{Brand.name}} </label>
                            </li>
                        </ul>
                    </div><!-- Brand -->
                    <div id="attrips">
                        <div class="brand">
                            <h6>{{ 'Brands' | translate }}</h6>
                            <ul class="list-unstyled check-ul">
                                <li *ngFor="let brand of brands">
                                    <input type="radio" name="brand" [value]="brand" (change)="filterByBrand($event.target.value)">
                                    <label  >{{brand}} </label>
                                </li>

                            </ul>
                        </div>
                        <div class="brand" *ngIf="attributes?.length > 0">
                          <h6>{{ 'Attributes' | translate }}</h6>
                          <ul class="list-unstyled check-ul">
                            <li *ngFor="let atr of attributes">
                              <input type="checkbox" name="attr" [value]="atr" (change)="filterByAttributes($event.target.value)">
                              <label  >{{atr}} </label>
                            </li>

                          </ul>

                        </div>
                    </div>
                    <!-- <button type="button" (click)="isAllSelected()">ssssssssssss</button> -->
                </form>
            </div><!-- End Panel-->
        </div><!-- Col #1-->

        <div class="col-xl-9 col-sm-12">
            <div class="save-search">
                <h6>{{ 'Found results' | translate }}</h6>
                <div class="panel row">
                    <div class="col-xl-6 col-sm-12">
                        <div class="row">
                            <span class="col-xl-3  col-sm-12 sort"
                                style="margin-top:7px; text-transform: none">{{'Sort by' | translate }}</span>
                            <select #sort class="form-control col-xl-9 col-sm-12"  (change)="sortP(sort.value)">
                                <option selected value="1">Select ..</option>
                                <option  value="1" >Top Rated</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-xl-6 col-sm-12">
                      <div class=" text-right">
                      </div>
                    </div>
                </div>



<div *ngIf="products?.length==0" class="text-center">
    <img class="mt-3 ml-5" src="assets/images/empty.png" alt="">
    <p> {{"empty" | translate}}</p>
</div>
<div *ngIf="loadedResult"  [class.text-right] ="translate.getlocalLang()=='ar'" [class.text-left] ="translate.getlocalLang()=='en'">
    <div class="fb-item" *ngFor="let item of skeleton" >
        <div class="first-section-wrapper">
          <div class="gravatar" >
            <ngx-skeleton-loader  [theme]="{ width: '200px', height: '100px' }">
            </ngx-skeleton-loader>
          </div>
          <div class="gravatar-title">
            <div>
              <ngx-skeleton-loader
                [theme]="{ width: '170px', 'border-radius': '0', height: '15px' }"
              ></ngx-skeleton-loader>
            </div>
            <div>
                <ngx-skeleton-loader
                  [theme]="{
                    width: '200px',
                    'border-radius': '0',
                    height: '15px',
                    'margin-bottom': '10px'
                  }"
                ></ngx-skeleton-loader>
              </div>
          </div>
        </div>
        <div class="second-section-wrapper">
          <div class="wrapper">
            <ngx-skeleton-loader
              [theme]="{
                width: '80%',
                'border-radius': '0',
                height: '15px',
                'margin-bottom': '10px'
              }"
            ></ngx-skeleton-loader>
          </div>
          <div class="wrapper">
            <ngx-skeleton-loader
              [theme]="{
                width: '90%',
                'border-radius': '0',
                height: '15px',
                'margin-bottom': '10px'
              }"
            ></ngx-skeleton-loader>
          </div>
          <div class="wrapper">
            <ngx-skeleton-loader
              [theme]="{
                width: '60%',
                'border-radius': '0',
                height: '15px',
                'margin-bottom': '10px'
              }"
            ></ngx-skeleton-loader>
          </div>
        </div>
      </div>
</div>
 <!-- list of result -->
                <div class="item row" *ngFor="let product of filterProducts | paginate: { itemsPerPage: itemsPerPage, currentPage: p } | filter: filterBrand ">
                    <div class="photo text-center col-sm-3">
                        <img appImage src="{{product?.media[0]?.url}}" alt="Image" class="img-fluid">
                    </div><!-- Photo -->
                    <div class="about-photo  col-sm-9">
                        <div class="float-left py-3">
                            <h6><a routerLink="/product/{{product?.productId}}">{{product?.title}}</a></h6>
                            <small>{{(product.postedOn*1000)  | date }}</small>
                        </div>
                        <div class="float-right one one2 py-3">
                            <span class="alert-yellow">
                                {{math(product.reg_price,product.sale_price)}}%
                                {{ 'off' | translate }}
                              </span>
                            <span class="red">AED {{product.sale_price}}</span>
                        </div>
                        <div class="clearfix"></div>
                        <span class="line"></span>
                        <div class="float-left py-3">
                            <small style="margin-right: 0;">{{'Home' | translate }} <i class="fas fa-chevron-right fa-sm"></i>
                              {{ 'Categories' | translate }} <i class="fas fa-chevron-right fa-sm"></i>
                               <label *ngIf="translate.getlocalLang()=='ar'" > {{product.category}}  </label>
                               <label *ngIf="translate.getlocalLang()=='en'" > {{product.category}}  </label>
                              </small><br>
                            <bar-rating  name="rating" [rate]="product?.ratings" [max]="5" [readOnly]="true"></bar-rating>
                        </div>
                        <div>
                            <label href="#" class="button2"><i class="fas fa-phone"></i> {{product?.mobile}} </label>
                            <a href="javascript:;"  (click)="getInfoMap(product)" class="button2"  data-toggle="modal" data-target="#locationMap">
                              <i class="fas fa-map-marker-alt"></i> {{ "View Location" | translate}}
                            </a>
                            <div [class.text-right] ="translate.getlocalLang()=='en'" [class.text-left] ="translate.getlocalLang()=='ar'" class="grey">
                                <a  (click)="like(product.productId)" href="javascript:;" class="button2"><i [appLike]="product.productId" class="far fa-heart"></i></a>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div><!-- About Photo-->
                </div>

                <div class="paginaion text-center">
                    <pagination-controls class="my-pagination" (pageChange)="p = $event"></pagination-controls>
                </div>

            </div><!-- End Save Saerch-->
        </div><!-- Col#2 -->
    </div><!-- End Row -->
</div>


<!---------------------------------------------------------------------------------------------------------------------        -->
<div class="modal fade" id="locationMap" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" *ngIf="product">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">location {{ product?.customerName}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <agm-map style="height:500px"  [latitude]="lat" [longitude]="lng">
          <agm-marker [latitude]="lat" [longitude]="lng" [label]="product.customerName">
            <agm-info-window>
              <strong>company name : {{ product.customerName}}</strong>
              <p> address : {{ product?.city}}</p>
              <p>phone: {{product?.mobile}} </p>
            </agm-info-window>
          </agm-marker>
        </agm-map>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!---------------------------------------------------------------------------------------------------------------------        -->
